[tox]
envlist =
    lint
    py{38,39,310}

[testenv]
usedevelop = false
skip_install = true
deps =
    -r requirements.txt
commands_pre =
    {envbindir}/buildout -nc {toxinidir}/buildout.cfg buildout:directory={envdir} buildout:develop={toxinidir} install test
commands =
    {envbindir}/test {posargs:-cv}

[testenv:lint]
basepython = python3.8
deps =
    -r requirements.txt
commands_pre =
    {envbindir}/buildout -nc {toxinidir}/buildout.cfg buildout:directory={envdir} buildout:develop={toxinidir} code-analysis:directory={toxinidir}/src/collective/recipe/backup install code-analysis
commands =
    {envbindir}/code-analysis
